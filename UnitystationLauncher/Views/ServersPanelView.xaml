<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:models="clr-namespace:UnitystationLauncher.Models"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             TextBlock.FontSize="18"
             x:Class="UnitystationLauncher.Views.ServersPanelView"
             >
  <UserControl.DataTemplates>
    <DataTemplate DataType="{x:Type models:Server}">
      <DockPanel>
      <Grid ColumnDefinitions="0.22*,0.119*,0.17*,0.153*,0.102*,0.102*,0.085*,0.042*" DockPanel.Dock="Top" HorizontalAlignment="Stretch">
      <Border BorderThickness="1 1 0 1" CornerRadius="8 0 0 8" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="0" VerticalAlignment="Center" Height="40">
        <TextBlock Text="{Binding ServerName}" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="12" Width="100"/>
      </Border>
      <Border BorderThickness="0 1 0 1" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="1" VerticalAlignment="Center" Height="40">
        <TextBlock Text="{Binding BuildVersion}" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
      </Border>
        <Border BorderThickness="0 1 0 1" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="2" VerticalAlignment="Center" Height="40">
          <TextBlock Text="{Binding CurrentMap}" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
        </Border>
        <Border BorderThickness="0 1 0 1" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="3" VerticalAlignment="Center" Height="40">
          <TextBlock Text="{Binding GameMode}" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
        </Border>
        <Border BorderThickness="0 1 0 1" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="4" VerticalAlignment="Center" Height="40">
          <TextBlock Text="{Binding IngameTime}" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
        </Border>
        <Border BorderThickness="0 1 0 1" Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="5" VerticalAlignment="Center" Height="40">
          <TextBlock Text="{Binding PlayerCount}" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
        </Border>
        <Border BorderThickness="0 1 1 1" CornerRadius="0 8 8 0"  Margin="0 8 0 0" BorderBrush="Gray" Grid.Column="6" VerticalAlignment="Center" Height="40">
          <TextBlock Text="5" VerticalAlignment="Center" TextAlignment="Center" FontSize="10"/>
        </Border>
      </Grid>
        <StackPanel IsVisible="{Binding (ListBoxItem.IsSelected),
                                RelativeSource={RelativeSource FindAncestor,
                                    AncestorType={x:Type ListBoxItem}}}" Height="40">
          <TextBlock Margin="5" Text="TODO: Add all the buttons in rollout here" FontSize="10"/>
          
        </StackPanel>
      </DockPanel>
    </DataTemplate>
    <DataTemplate DataType="{x:Type models:Download}">
      <Border>
        <StackPanel Margin="10 0 0 0">
          <TextBlock>From:</TextBlock>
          <TextBlock FontWeight="Bold" Text="{Binding Url}"/>
          <ProgressBar Value="{Binding Progress^}"/>
          <TextBlock>To:</TextBlock>
          <TextBlock FontWeight="Bold" Text="{Binding RelativeInstallationPath}"/>
        </StackPanel>
      </Border>
    </DataTemplate>
  </UserControl.DataTemplates>
  <DockPanel>
    <Grid ColumnDefinitions="0.22*,0.119*,0.17*,0.153*,0.102*,0.102*,0.085*,0.042*" Margin="2 4 4 0" VerticalAlignment="Top" HorizontalAlignment="Stretch" Background="#3E5D80"
          DockPanel.Dock="Top">
      <Grid.RowDefinitions>
        <RowDefinition Height="25" />
      </Grid.RowDefinitions>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="0" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="SERVER" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center" FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="1" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="BUILD" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center" FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="2" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="MAP" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center"  FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="3" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="GAMEMODE" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center"  FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="4" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="TIME" VerticalAlignment="Center" TextAlignment="Center"  FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="5" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="ONLINE" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center"  FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="6" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <TextBlock Text="PING"  FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center"  FontSize="12"/>
      </Border>
      <Border BorderThickness="1" BorderBrush="Gray" Grid.Column="7" Grid.Row="0" VerticalAlignment="Top" Height="25">
        <Button Background="#45458BD1">
          <Image Source="avares://UnitystationLauncher/Assets/refresh.png" Height="20" Width="20"/>
          </Button>
      </Border>
      <!--<ProgressBar IsIndeterminate="{Binding ServerManager.Refreshing}" Height="4" MinHeight="1" BorderThickness="0"/>-->
    </Grid>
    <StackPanel>
      <ListBox
        Name="ServerListBox"
        Items="{Binding ServerManager.Servers^}"
        SelectedItem="{Binding SelectedServer}"
        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
        Margin="2 0 2 4"
        BorderThickness="0"
        Padding="0 0 0 10"/>
    </StackPanel>
    </DockPanel>
    <!--<Border BorderThickness="5 0 0 0" BorderBrush="{DynamicResource HighlightBrush}" DockPanel.Dock="Top">
      <StackPanel IsVisible="{Binding SelectedServer, Converter={x:Static ObjectConverters.IsNotNull}}">
        <StackPanel DataContext="{Binding SelectedServer}">
          <TextBlock Margin="5" Text="{Binding ServerName}"/>
          <Separator/>
          <Grid Margin="5" ColumnDefinitions="*, *" RowDefinitions="auto,auto,auto,auto,auto">
            <TextBlock Grid.Row="0" Grid.Column="0">Version </TextBlock>
            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
              <TextBlock Text="{Binding ForkName}"/>
              <TextBlock>:</TextBlock>
              <TextBlock Text="{Binding BuildVersion}"/>
            </StackPanel>

            <TextBlock Grid.Row="1" Grid.Column="0">IP</TextBlock>
            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
              <TextBlock Text="{Binding ServerIP}"/>
              <TextBlock>:</TextBlock>
              <TextBlock Text="{Binding ServerPort}"/>
            </StackPanel>

            <TextBlock Grid.Row="2" Grid.Column="0">Time </TextBlock>
            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding IngameTime}"/>

            <TextBlock Grid.Row="3" Grid.Column="0">Players </TextBlock>
            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding PlayerCount}"/>

            <Expander Grid.Row="4" Grid.ColumnSpan="2" Header="Downloads">
              <StackPanel Margin="10 0 0 0">
                <TextBlock Text="{Binding WinDownload}"/>
                <TextBlock Text="{Binding OSXDownload}"/>
                <TextBlock Text="{Binding LinuxDownload}"/>
              </StackPanel>
            </Expander>
          </Grid>
          <StackPanel Margin="5">
            <Button Command="{Binding Start}" Padding="5">Play</Button>
          </StackPanel>
        </StackPanel>
        <StackPanel>
          <Button Command="{Binding Download}" IsVisible="{Binding SelectedDownload^, Converter={x:Static ObjectConverters.IsNull}}" Padding="5" Background="Transparent">Download</Button>
          <ContentControl Content="{Binding SelectedDownload^}"/>
        </StackPanel>
      </StackPanel>
    </Border>
  </DockPanel>-->

  
</UserControl>
